- let launch_time = theme.footer.runtime.launch_time
- let offduty_img = theme.footer.runtime.offduty_img
- let offduty_description = theme.footer.runtime.offduty_description
script(async=true).
  (function () {
    var grt = new Date("#{launch_time}"); //ウェブサイトの公開時間を設定
    var now = new Date();
    var dnum;
    var hnum;
    var mnum;
    var snum;
    var nowHour;

    // 日数、時間、分数、秒数を計算して更新
    function updateTime() {
      now = new Date(); // now の値を更新
      nowHour = now.getHours(); // nowHour の値を更新
      var days = (now - grt) / 1000 / 60 / 60 / 24;
      dnum = Math.floor(days);
      var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
      hnum = Math.floor(hours);
      if (String(hnum).length == 1) {
        hnum = "0" + hnum;
      }
      var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
      mnum = Math.floor(minutes);
      if (String(mnum).length == 1) {
        mnum = "0" + mnum;
      }
      var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
      snum = Math.round(seconds);
      if (String(snum).length == 1) {
        snum = "0" + snum;
      }
    }

    // ウェブページに表示されるウェブサイトの稼働時間を更新
    function updateHtml() {
      const footer = document.getElementById("footer");
      if (!footer) return
      let currentTimeHtml = "";
      if (nowHour < 18 && nowHour >= 9) {
        // 勤務時間中の場合、デフォルトは「安知魚-勤務中にサボり中.svg」画像で、変更不要です。
        currentTimeHtml = `このサイトは ${dnum} 日間稼働しています<span id='runtime'> ${hnum} 時間 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
      } else {
        // 勤務時間外の場合、「安知魚-退勤しました.svg」画像を挿入します。
        let img = document.querySelector("#workboard .workSituationImg");
        if (img != null) {
          img.src = "#{offduty_img}";
          img.title = "#{offduty_description}";
          img.alt = "#{offduty_description}";
        }

        currentTimeHtml = `このサイトは ${dnum} 日間<span id='runtime'> ${hnum} 時間 ${mnum} 分 ${snum} 秒 稼働しています！</span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
      }

      if (document.getElementById("runtimeTextTip")) {
        document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
      }
    }

    setInterval(() => {
      updateTime();
      updateHtml();
    }, 1000);
  })();
